<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–û—Ç–∫—Ä—ã—Ç–∫–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ç–æ</title>
<style>
  :root{
    --bg:#0b0b0d; --accent:#ff6aa2; --card:#111;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui, Arial; background:linear-gradient(180deg,#070607,#141218); color:#fff;
    overflow:hidden;
  }

  header{padding:18px 12px;text-align:center}
  h1{margin:6px 0;font-size:28px;color:var(--accent)}
  p.lead{margin:6px 0 18px;color:#d0c9d9}

  /* –º–µ—Å—Ç–æ –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–∞ */
  .wrap{max-width:920px;margin:0 auto;padding:10px}
  .slider{
    position:relative;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px; padding:10px; box-shadow:0 10px 40px rgba(0,0,0,.6);
  }
  .slides{position:relative; height:70vh; display:flex; align-items:center; justify-content:center; overflow:hidden}
  .slide{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center; padding:10px;
    opacity:0; transform:scale(.995); transition:opacity .6s ease, transform .6s ease;
  }
  .slide.active{opacity:1; transform:scale(1)}
  .slide img{max-width:100%; max-height:calc(70vh - 20px); object-fit:contain; border-radius:10px; box-shadow:0 12px 40px rgba(0,0,0,.6); background:#111}

  .caption{margin:14px 0;font-size:18px;color:#ffdfe8; min-height:24px}

  .controls{display:flex; gap:10px; justify-content:center; margin-bottom:14px}
  .controls button{
    border:0; background:var(--accent); color:#14061b; padding:10px 14px; border-radius:10px; cursor:pointer;
    font-weight:600;
  }
  .controls button.ghost{background:transparent; border:1px solid rgba(255,255,255,.08); color:#ffdfe8}

  /* debug */
  #debug{max-width:920px;margin:12px auto;color:#ffdfe8;font-size:14px;text-align:left;padding:6px 12px}
  .dbg-list{display:flex; gap:10px; flex-wrap:wrap}
  .dbg-item{padding:6px 10px;background:rgba(255,255,255,0.03);border-radius:8px}

  /* modal message */
  .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:9999}
  .modal.show{display:flex}
  .modal .box{background:linear-gradient(180deg,#1a0720,#2a112b); padding:22px; border-radius:14px; width:min(90%,560px);box-shadow:0 20px 80px rgba(0,0,0,.7); text-align:center}
  .modal h2{color:var(--accent); margin:0 0 8px}
  .modal p{color:#ffdfe8;margin:0 0 14px}
  .modal button{margin-top:8px;padding:8px 14px;border-radius:8px;border:0;background:var(--accent); color:#14061b; cursor:pointer}

  /* hearts */
  .heart{position:fixed; width:18px; height:18px; transform:rotate(45deg); pointer-events:none; z-index:9998; filter:drop-shadow(0 6px 12px rgba(0,0,0,.45));}
  .heart::before,.heart::after{content:""; position:absolute; width:18px; height:18px; border-radius:50%; background:inherit}
  .heart::before{top:-9px; left:0} .heart::after{left:-9px; top:0}
  @keyframes floatDown{ from{transform:translateY(-10vh) rotate(45deg) scale(.9)} to{transform:translateY(110vh) rotate(45deg) scale(1.1)} }
  /* small responsive */
  @media (max-width:720px){
    .caption{font-size:16px}
    h1{font-size:22px}
    .slides{height:56vh}
  }
</style>
</head>
<body>

<header>
  <h1>–î–ª—è —Ç–µ–±—è ‚Äî –º–∏–Ω–∏-–æ—Ç–∫—Ä—ã—Ç–∫–∞</h1>
  <p class="lead">–ú—É–∑—ã–∫–∞, —Ñ–æ—Ç–æ, –∞–Ω–∏–º–∞—Ü–∏–∏ ‚Äî –≤—Å—ë –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</p>
</header>

<div class="wrap">
  <div class="slider" id="sliderWrap">
    <div class="slides" id="slidesContainer">
      <!-- —Å—é–¥–∞ –≤—Å—Ç–∞–≤—è—Ç—Å—è —Å–ª–∞–π–¥—ã –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ -->
    </div>
  </div>

  <div class="caption" id="caption">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

  <div class="controls">
    <button id="prevBtn">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
    <button id="msgBtn" class="ghost">üíå –°–æ–æ–±—â–µ–Ω–∏–µ</button>
    <button id="playBtn">‚ñ∂Ô∏è –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É</button>
    <button id="nextBtn">–í–ø–µ—Ä—ë–¥ ‚û°Ô∏è</button>
  </div>
</div>

<!-- debug -->
<div id="debug">
  <strong>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤:</strong>
  <div class="dbg-list" id="debugList"></div>
  <div style="margin-top:8px;color:#ffdfe8;font-size:13px">–ï—Å–ª–∏ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫—Ä–∞—Å–Ω—ã–µ ‚Äî –ø—Ä–æ–≤–µ—Ä—å: –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (1.jpg..6.jpg), —Ä–µ–≥–∏—Å—Ç—Ä (JPG ‚â† jpg), –ø–∞–ø–∫—É <code>img/</code>, –∏ –∑–∞–ø—É—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –Ω–∏–∂–µ).</div>
</div>

<!-- modal -->
<div class="modal" id="modal">
  <div class="box">
    <h2>–ú–æ—ë —Å–æ–æ–±—â–µ–Ω–∏–µ</h2>
    <p id="modalText">–õ—é–±–∏–º–∞—è, —Å–ø–∞—Å–∏–±–æ —á—Ç–æ —Ç—ã –µ—Å—Ç—å. –Ø —Å–¥–µ–ª–∞–ª —ç—Ç–æ –¥–ª—è —Ç–µ–±—è.</p>
    <button onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<!-- audio (—Ñ–∞–π–ª music.mp3 —Ä—è–¥–æ–º —Å index.html) -->
<audio id="bgAudio" src="music.mp3" preload="none" loop></audio>

<script>
/* ==== –ù–∞—Å—Ç—Ä–æ–π–∫–∏: –µ—Å–ª–∏ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ —É —Ç–µ–±—è –¥—Ä—É–≥–∏–µ ‚Äî –ø–æ–º–µ–Ω—è–π —Ç—É—Ç ==== */
const fileNames = ['1.jpg','2.jpg','3.jpg','4.jpg','5.jpg','6.jpg'];
const captionMap = {
  '1.jpg': "–¢—ã –¥–µ–ª–∞–µ—à—å –º–æ—é –∂–∏–∑–Ω—å —è—Ä—á–µ üå∏",
  '2.jpg': "–° —Ç–æ–±–æ–π –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –æ—Å–æ–±–µ–Ω–Ω—ã–π üíï",
  '3.jpg': "–¢–≤–æ—è —É–ª—ã–±–∫–∞ ‚Äî –º–æ—ë —Å—á–∞—Å—Ç—å–µ üòç",
  '4.jpg': "–¢—ã ‚Äî –º–æ—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è ‚ú®",
  '5.jpg': "–Ø –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω —Å—É–¥—å–±–µ –∑–∞ —Ç–µ–±—è üôè",
  '6.jpg': "–¢—ã –Ω–∞–≤—Å–µ–≥–¥–∞ –≤ –º–æ—ë–º —Å–µ—Ä–¥—Ü–µ ‚ù§Ô∏è"
};
/* ============================================================== */

const debugList = document.getElementById('debugList');
const slidesContainer = document.getElementById('slidesContainer');
const captionEl = document.getElementById('caption');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const msgBtn = document.getElementById('msgBtn');
const playBtn = document.getElementById('playBtn');
const modal = document.getElementById('modal');
const bgAudio = document.getElementById('bgAudio');

let loadedFiles = []; // {name, url}
let current = 0;
let autoTimer = null;

/* –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ –º–∞—Å—Å–∏–≤–∞ ‚Äî –¥–µ–ª–∞–µ–º Image() –∏ —Å–º–æ—Ç—Ä–∏–º onload/onerror */
function testFiles() {
  debugList.innerHTML = '';
  loadedFiles = [];
  let done = 0;
  fileNames.forEach((name, idx) => {
    const testUrl = 'img/' + name + '?_=' + Date.now(); // cache-bust
    const img = new Image();
    const item = document.createElement('div'); item.className = 'dbg-item';
    item.textContent = name + ' ‚Äî —Ç–µ—Å—Ç...';
    debugList.appendChild(item);

    img.onload = () => {
      item.textContent = name + ' ‚úÖ';
      item.style.background = 'linear-gradient(90deg,#0f6,#062)';
      loadedFiles.push({name, url: testUrl});
      done++; if(done===fileNames.length) onAllTested();
    };
    img.onerror = () => {
      item.textContent = name + ' ‚ùå (–Ω–µ –Ω–∞–π–¥–µ–Ω–æ)';
      item.style.background = 'linear-gradient(90deg,#f66,#a11)';
      done++; if(done===fileNames.length) onAllTested();
    };
    img.src = testUrl;
    // –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –±—Ä–∞—É–∑ –∫–µ—à–∏—Ä—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ:
    if (img.complete) {
      // small delay to allow onload/onerror to fire properly
      setTimeout(()=>{ /* nothing */ },50);
    }
  });
}

/* –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ —Å—Ç—Ä–æ–∏–º —Å–ª–∞–π–¥—ã —Ç–æ–ª—å–∫–æ –∏–∑ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ */
function onAllTested(){
  slidesContainer.innerHTML = '';
  if (loadedFiles.length === 0) {
    captionEl.textContent = '–û—à–∏–±–∫–∞: –Ω–∏ –æ–¥–Ω–æ —Ñ–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ. –ü—Ä–æ–≤–µ—Ä—å –ø—É—Ç—å img/ –∏ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤.';
    return;
  }
  // —Å–æ–∑–¥–∞—ë–º —Å–ª–∞–π–¥—ã –≤ –ø–æ—Ä—è–¥–∫–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ fileNames
  const ordered = fileNames.map(n => loadedFiles.find(f=>f.name===n)).filter(Boolean);
  ordered.forEach((f, i) => {
    const slide = document.createElement('div');
    slide.className = 'slide' + (i===0? ' active':'');
    const img = document.createElement('img');
    img.src = f.url;
    img.alt = f.name;
    img.onload = ()=>{ /* ok */ }
    img.onerror = ()=>{ /* should not happen ‚Äî –º—ã —É–∂–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ */ }
    slide.appendChild(img);
    slidesContainer.appendChild(slide);
  });

  // –ø–æ–¥–ø–∏—Å—å –∏ –ø–æ–∫–∞–∑ –ø–µ—Ä–≤–æ–≥–æ
  current = 0;
  updateCaption();
  resetAuto();

  // –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –Ω–µ–±–æ–ª—å—à–æ–π —Å–æ–≤–µ—Ç ‚Äî —Å–¥–µ–ª–∞—Ç—å –∫–ª–∏–∫ –ø–æ —Ñ–æ—Ç–æ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
  slidesContainer.querySelectorAll('img').forEach(img=>{
    img.style.cursor = 'zoom-in';
    img.addEventListener('click', ()=> window.open(img.src.split('?')[0], '_blank'));
  });
}

/* –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ */
function showSlide(index){
  const slides = document.querySelectorAll('.slide');
  if(slides.length===0) return;
  slides.forEach((s,i)=> s.classList.toggle('active', i===index));
  current = (index + slides.length) % slides.length;
  updateCaption();
}
function nextSlide(){ showSlide(current+1); resetAuto(); }
function prevSlide(){ showSlide(current-1); resetAuto(); }

function updateCaption(){
  const slides = document.querySelectorAll('.slide');
  if(slides.length===0) { captionEl.textContent='–ù–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π' ; return; }
  const imgEl = slides[current].querySelector('img');
  const name = imgEl ? imgEl.alt : null;
  captionEl.textContent = captionMap[name] || ('–§–æ—Ç–æ: ' + (name || current+1));
}

/* –∞–≤—Ç–æ–ø–æ–∫–∞–∑ */
function resetAuto(){
  if(autoTimer) clearInterval(autoTimer);
  autoTimer = setInterval(()=>{ showSlide(current+1); }, 5000);
}

/* message modal */
function showModal(){ modal.classList.add('show'); }
function closeModal(){ modal.classList.remove('show'); }

/* hearts: –º–Ω–æ–≥–æ –∏ —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã–µ */
const heartColors = ['#ff6aa2','#ff9ccf','#ff4d6d','#ffd1e3','#ffd166','#f48fb1'];
function createHeart(){
  const h = document.createElement('div');
  h.className = 'heart';
  const size = (10 + Math.random()*34) | 0;
  h.style.width = h.style.height = size+'px';
  h.style.left = (Math.random()*100) + 'vw';
  h.style.background = heartColors[(Math.random()*heartColors.length)|0];
  h.style.top = '-10vh';
  const duration = (3 + Math.random()*6).toFixed(2);
  h.style.animation = `floatDown ${duration}s linear forwards`;
  h.style.opacity = (0.5 + Math.random()*0.6).toFixed(2);
  document.body.appendChild(h);
  setTimeout(()=> h.remove(), (parseFloat(duration)*1000)+200);
}

/* –º—É–∑—ã–∫–∞ toggle */
let musicPlaying = false;
function toggleMusic(){
  if(bgAudio.paused){
    bgAudio.play().catch(()=>{/* blocked until user interacts; ignore */});
    playBtn.textContent = '‚è∏Ô∏è –ü–∞—É–∑–∞';
    musicPlaying = true;
  } else {
    bgAudio.pause();
    playBtn.textContent = '‚ñ∂Ô∏è –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É';
    musicPlaying = false;
  }
}

/* —Å–æ–±—ã—Ç–∏—è –∫–Ω–æ–ø–æ–∫ */
prevBtn.addEventListener('click', prevSlide);
nextBtn.addEventListener('click', nextSlide);
msgBtn.addEventListener('click', showModal);
playBtn.addEventListener('click', toggleMusic);

/* –∑–∞–ø—É—Å–∫ */
testFiles();
/* –º–Ω–æ–≥–æ —Å–µ—Ä–¥–µ—á–µ–∫ ‚Äî —á–∞—â–µ */
setInterval(createHeart, 200); // –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –µ—â—ë –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

/* –ø–æ–¥—Å–∫–∞–∑–∫–∞: –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –æ—Ç–∫—Ä–æ–π DevTools -> Network –∏ –ø–æ—Å–º–æ—Ç—Ä–∏ 404 –¥–ª—è /img/.. */
</script>
</body>
</html>
